{"version":3,"file":"index.cjs.js","sources":["../src/trigram.ts","../src/index.ts","../src/const.ts"],"sourcesContent":["export const trigram_info = [\n  {\n    trigram_name: \"乾\",\n    pre_num: 1,\n    zh_name: \"天\",\n    wuxing: \"金\",\n    gan: \"庚\",\n    zhi: \"戌亥\",\n    yy: 1,\n    after_num: 6,\n    yao_yy: \"111\",\n    yao_yang_num: 3,\n    yao_yin_num: 0,\n  },\n  {\n    trigram_name: \"兑\",\n    pre_num: 2,\n    zh_name: \"泽\",\n    wuxing: \"金\",\n    gan: \"辛\",\n    zhi: \"酉\",\n    yy: 0,\n    after_num: 7,\n    yao_yy: \"011\",\n    yao_yang_num: 2,\n    yao_yin_num: 1,\n  },\n  {\n    trigram_name: \"离\",\n    pre_num: 3,\n    zh_name: \"火\",\n    wuxing: \"火\",\n    gan: \"丙丁\",\n    zhi: \"午\",\n    yy: 0,\n    after_num: 9,\n    yao_yy: \"101\",\n    yao_yang_num: 2,\n    yao_yin_num: 1,\n  },\n  {\n    trigram_name: \"震\",\n    pre_num: 4,\n    zh_name: \"雷\",\n    wuxing: \"木\",\n    gan: \"甲\",\n    zhi: \"卯\",\n    yy: 1,\n    after_num: 3,\n    yao_yy: \"001\",\n    yao_yang_num: 1,\n    yao_yin_num: 2,\n  },\n  {\n    trigram_name: \"巽\",\n    pre_num: 5,\n    zh_name: \"风\",\n    wuxing: \"木\",\n    gan: \"乙\",\n    zhi: \"辰巳\",\n    yy: 0,\n    after_num: 4,\n    yao_yy: \"110\",\n    yao_yang_num: 2,\n    yao_yin_num: 1,\n  },\n  {\n    trigram_name: \"坎\",\n    pre_num: 6,\n    zh_name: \"水\",\n    wuxing: \"水\",\n    gan: \"壬癸\",\n    zhi: \"子\",\n    yy: 1,\n    after_num: 1,\n    yao_yy: \"010\",\n    yao_yang_num: 1,\n    yao_yin_num: 2,\n  },\n  {\n    trigram_name: \"艮\",\n    pre_num: 7,\n    zh_name: \"山\",\n    wuxing: \"土\",\n    gan: \"戊\",\n    zhi: \"寅丑\",\n    yy: 1,\n    after_num: 8,\n    yao_yy: \"100\",\n    yao_yang_num: 1,\n    yao_yin_num: 2,\n  },\n  {\n    trigram_name: \"坤\",\n    pre_num: 8,\n    zh_name: \"地\",\n    wuxing: \"土\",\n    gan: \"己\",\n    zhi: \"未申\",\n    yy: 0,\n    after_num: 2,\n    yao_yy: \"000\",\n    yao_yang_num: 0,\n    yao_yin_num: 3,\n  },\n];\n","\nimport { trigram_info } from \"./trigram.js\";\nimport { YANG_C, YIN_C, YAO_TOTAL, YANG_G, YIN_G } from \"./const.js\";\n\n/**\n * 元策数计算\n * @param YangYaoCount 卦中阳爻的数量\n * @returns 元策数\n * @author YuYunhao\n */\nexport const calcOriginCFigure = (YangYaoCount: number) => {\n  return YangYaoCount * YANG_C + (YAO_TOTAL - YangYaoCount) * YIN_C;\n};\n\n/**\n * 元轨数计算\n * @param YangYaoCount 卦中阳爻的数量\n * @returns 元轨数\n * @author YuYunhao\n */\nexport const calcOriginGFigure = (YangYaoCount: number) => {\n  return YangYaoCount * YANG_G + (YAO_TOTAL - YangYaoCount) * YIN_G;\n};\n\n/**\n * 策数计算\n * @param formatString 计算卦的策数，如：地天泰5爻动，用卦的先天数，传递'815'\n * @returns 卦对应的策数\n * @author YuYunhao\n */\nexport const calcCFigure = (formatString: string): number => {\n  const [externalTrigramNum, internalTrigramNum, shiftYao] = formatString\n    .split(\"\")\n    .map((i) => +i);\n  const externalTrigram = trigram_info.find(\n    (i) => i.pre_num === externalTrigramNum\n  );\n  const internalTrigram = trigram_info.find(\n    (i) => i.pre_num === internalTrigramNum\n  );\n  if (externalTrigram === undefined || internalTrigram === undefined) {\n    throw new Error('invalid format string!')\n  }\n  const trigramYangYaoNum =\n    externalTrigram.yao_yang_num + internalTrigram.yao_yang_num;\n  // 元策数\n  const OriginCFigure = calcOriginCFigure(trigramYangYaoNum);\n  // 错综数\n  const kaleidoscopeFigure =\n    externalTrigram.pre_num + internalTrigram.pre_num + shiftYao;\n  let CFigure = Number.MAX_SAFE_INTEGER;\n  if (shiftYao > YAO_TOTAL / 2) {\n    CFigure =\n      shiftYao * 10 * OriginCFigure +\n      externalTrigram.pre_num * 1 * OriginCFigure +\n      OriginCFigure +\n      kaleidoscopeFigure;\n  } else {\n    CFigure =\n      shiftYao * 1 * OriginCFigure +\n      internalTrigram.pre_num * 10 * OriginCFigure +\n      OriginCFigure +\n      kaleidoscopeFigure;\n  }\n  return CFigure;\n};\n\n/**\n * 轨数计算\n * @param formatString 计算卦的轨数，如：地天泰5爻动，用卦的先天数，传递'815'\n * @returns 卦对应的轨数\n * @author YuYunhao\n */\nexport const calcGFigure = (formatString: string): number => {\n  const [externalTrigramNum, internalTrigramNum, shiftYao] = formatString\n    .split(\"\")\n    .map((i) => +i);\n  const externalTrigram = trigram_info.find(\n    (i) => i.pre_num === externalTrigramNum\n  );\n  const internalTrigram = trigram_info.find(\n    (i) => i.pre_num === internalTrigramNum\n  );\n  if (externalTrigram === undefined || internalTrigram === undefined) {\n    throw new Error('invalid format string!')\n  }\n  const trigramYangYaoNum =\n    externalTrigram.yao_yang_num + internalTrigram.yao_yang_num;\n  // 元轨数\n  const OriginGFigure = calcOriginGFigure(trigramYangYaoNum);\n  // 错综数\n  const kaleidoscopeFigure =\n    externalTrigram.after_num + internalTrigram.after_num + shiftYao;\n  let GFigure = Number.MAX_SAFE_INTEGER;\n  if (shiftYao > YAO_TOTAL / 2) {\n    GFigure =\n      shiftYao * 10 * OriginGFigure +\n      externalTrigram.after_num * 1 * OriginGFigure +\n      OriginGFigure +\n      kaleidoscopeFigure;\n  } else {\n    GFigure =\n      shiftYao * 1 * OriginGFigure +\n      internalTrigram.after_num * 10 * OriginGFigure +\n      OriginGFigure +\n      kaleidoscopeFigure;\n  }\n  return GFigure;\n};\n\nexport function getTrigramFromCFigure(cFigure: number): string[]\nexport function getTrigramFromCFigure(cFigure: number, mode: 1, ganYang: boolean): string[]\n/**\n * 策数配卦\n * @param cFigure 卦的策数\n * @param mode 策数5的配卦方式，默认不传递为艮，传递1会根据日干的阴阳来配，阳艮阴坤\n * @param ganYang 当日日干是否为阳干\n * @returns 策数对应的八卦\n * @author YuYunhao\n */\nexport function getTrigramFromCFigure(cFigure: number, mode?: 1, ganYang?: boolean): string[] {\n  const cFigureToTrigramMap = ['', '坎', '离', '震', '兑', '艮坤', '坎', '离', '巽', '乾']\n  return cFigure.toString().split('').map(i => {\n    const j = Number(i)\n    if (j !== 5) return cFigureToTrigramMap[j]\n    if (typeof mode === 'undefined') return '艮'\n    return ganYang ? '艮' : '坤'\n  })\n}\n\n// 轨数配卦\n/** @function */\nexport function getTrigramFromGFigure(gFigure: number): string[]\n/** @function */\nexport function getTrigramFromGFigure(gFigure: number, mode: 1, ganYang: boolean): string[]\n/**\n * \n * @param gFigure 卦的轨数\n * @param mode 轨数5的配卦方式，默认不传递为坤，传递1会根据日干的阴阳来配，阳艮阴坤\n * @param ganYang 当日日干是否为阳干\n * @returns 轨数对应的八卦\n * @author YuYunhao\n */\nexport function getTrigramFromGFigure(gFigure: number, mode?: 1, ganYang?: boolean): string[] {\n  const gFigureToTrigramMap = ['', '坎', '坤', '震', '巽', '艮坤', '乾', '兑', '艮', '离']\n  return gFigure.toString().split('').map(i => {\n    const j = Number(i)\n    if (j !== 5) return gFigureToTrigramMap[j]\n    if (typeof mode === 'undefined') return '坤'\n    return ganYang ? '艮' : '坤'\n  })\n}\n\n/**\n * 策数配五行\n * @param cFigure 卦的策数\n * @returns 策数对应的五行数组\n * @author YuYunhao\n */\nexport const getWuxingFromCFigure = (cFigure: number): string[] => {\n  const cFigureToTrigramMap = ['', '水', '火', '木', '金', '土', '水', '火', '木', '金']\n  return cFigure.toString().split('').map(i => cFigureToTrigramMap[+i])\n}\n\n/**\n * 轨数配五行\n * @param gFigure 卦的轨数\n * @returns 轨数对应的五行数组\n */\nexport const getWuxingFromGFigure = (gFigure: number): string[] => {\n  const gFigureToTrigramMap = ['', '水', '土', '木', '木', '土', '金', '金', '土', '火']\n  return gFigure.toString().split('').map(i => gFigureToTrigramMap[+i])\n}\n","export const YAO_TOTAL = 6;\nexport const YANG_MOST = 9;\nexport const YIN_MOST = 6;\nexport const YANG_LITTLE = 7;\nexport const YIN_LITTLE = 8;\nexport const TIAN_ORIGIN = 4;\nexport const TIAN_DI_MIX = TIAN_ORIGIN ** 2;\nexport const YANG_C = YANG_MOST * TIAN_ORIGIN;\nexport const YANG_G = YIN_LITTLE * TIAN_DI_MIX;\nexport const YIN_C = YIN_MOST * TIAN_ORIGIN;\nexport const YIN_G = YANG_LITTLE * TIAN_DI_MIX;\n"],"names":["trigram_info","trigram_name","pre_num","zh_name","wuxing","gan","zhi","yy","after_num","yao_yy","yao_yang_num","yao_yin_num","calcOriginCFigure","YangYaoCount","YANG_MOST","YIN_MOST","calcOriginGFigure","YIN_LITTLE","YANG_LITTLE","formatString","externalTrigramNum","internalTrigramNum","shiftYao","split","map","i","externalTrigram","find","internalTrigram","undefined","Error","trigramYangYaoNum","OriginCFigure","kaleidoscopeFigure","CFigure","Number","MAX_SAFE_INTEGER","YAO_TOTAL","OriginGFigure","GFigure","cFigure","mode","ganYang","cFigureToTrigramMap","toString","j","gFigure","gFigureToTrigramMap"],"mappings":"aAAO,MAAMA,EAAe,CAC1B,CACEC,aAAc,IACdC,QAAS,EACTC,QAAS,IACTC,OAAQ,IACRC,IAAK,IACLC,IAAK,KACLC,GAAI,EACJC,UAAW,EACXC,OAAQ,MACRC,aAAc,EACdC,YAAa,GAEf,CACEV,aAAc,IACdC,QAAS,EACTC,QAAS,IACTC,OAAQ,IACRC,IAAK,IACLC,IAAK,IACLC,GAAI,EACJC,UAAW,EACXC,OAAQ,MACRC,aAAc,EACdC,YAAa,GAEf,CACEV,aAAc,IACdC,QAAS,EACTC,QAAS,IACTC,OAAQ,IACRC,IAAK,KACLC,IAAK,IACLC,GAAI,EACJC,UAAW,EACXC,OAAQ,MACRC,aAAc,EACdC,YAAa,GAEf,CACEV,aAAc,IACdC,QAAS,EACTC,QAAS,IACTC,OAAQ,IACRC,IAAK,IACLC,IAAK,IACLC,GAAI,EACJC,UAAW,EACXC,OAAQ,MACRC,aAAc,EACdC,YAAa,GAEf,CACEV,aAAc,IACdC,QAAS,EACTC,QAAS,IACTC,OAAQ,IACRC,IAAK,IACLC,IAAK,KACLC,GAAI,EACJC,UAAW,EACXC,OAAQ,MACRC,aAAc,EACdC,YAAa,GAEf,CACEV,aAAc,IACdC,QAAS,EACTC,QAAS,IACTC,OAAQ,IACRC,IAAK,KACLC,IAAK,IACLC,GAAI,EACJC,UAAW,EACXC,OAAQ,MACRC,aAAc,EACdC,YAAa,GAEf,CACEV,aAAc,IACdC,QAAS,EACTC,QAAS,IACTC,OAAQ,IACRC,IAAK,IACLC,IAAK,KACLC,GAAI,EACJC,UAAW,EACXC,OAAQ,MACRC,aAAc,EACdC,YAAa,GAEf,CACEV,aAAc,IACdC,QAAS,EACTC,QAAS,IACTC,OAAQ,IACRC,IAAK,IACLC,IAAK,KACLC,GAAI,EACJC,UAAW,EACXC,OAAQ,MACRC,aAAc,EACdC,YAAa,IC7FJC,EAAqBC,GCHZC,GDIbD,ECFYE,IATI,EDWqBF,GASjCG,EAAqBH,GCZZI,IDabJ,ECXYK,KAVI,EDqBqBL,uBASlBM,IAC1B,MAAOC,EAAoBC,EAAoBC,GAAYH,EACxDI,MAAM,IACNC,KAAKC,IAAOA,IACTC,EAAkB1B,EAAa2B,MAClCF,GAAMA,EAAEvB,UAAYkB,IAEjBQ,EAAkB5B,EAAa2B,MAClCF,GAAMA,EAAEvB,UAAYmB,IAEvB,QAAwBQ,IAApBH,QAAqDG,IAApBD,EACnC,MAAM,IAAIE,MAAM,0BAElB,MAAMC,EACJL,EAAgBhB,aAAekB,EAAgBlB,aAE3CsB,EAAgBpB,EAAkBmB,GAElCE,EACJP,EAAgBxB,QAAU0B,EAAgB1B,QAAUoB,EACtD,IAAIY,EAAUC,OAAOC,iBAcrB,OAZEF,EADEZ,EAAWe,EAEA,GAAXf,EAAgBU,EACU,EAA1BN,EAAgBxB,QAAc8B,EAC9BA,EACAC,EAGW,EAAXX,EAAeU,EACW,GAA1BJ,EAAgB1B,QAAe8B,EAC/BA,EACAC,EAEGC,CAAO,sBASYf,IAC1B,MAAOC,EAAoBC,EAAoBC,GAAYH,EACxDI,MAAM,IACNC,KAAKC,IAAOA,IACTC,EAAkB1B,EAAa2B,MAClCF,GAAMA,EAAEvB,UAAYkB,IAEjBQ,EAAkB5B,EAAa2B,MAClCF,GAAMA,EAAEvB,UAAYmB,IAEvB,QAAwBQ,IAApBH,QAAqDG,IAApBD,EACnC,MAAM,IAAIE,MAAM,0BAElB,MAAMC,EACJL,EAAgBhB,aAAekB,EAAgBlB,aAE3C4B,EAAgBtB,EAAkBe,GAElCE,EACJP,EAAgBlB,UAAYoB,EAAgBpB,UAAYc,EAC1D,IAAIiB,EAAUJ,OAAOC,iBAcrB,OAZEG,EADEjB,EAAWe,EAEA,GAAXf,EAAgBgB,EACY,EAA5BZ,EAAgBlB,UAAgB8B,EAChCA,EACAL,EAGW,EAAXX,EAAegB,EACa,GAA5BV,EAAgBpB,UAAiB8B,EACjCA,EACAL,EAEGM,CAAO,iGAasBC,EAAiBC,EAAUC,GAC/D,MAAMC,EAAsB,CAAC,GAAI,IAAK,IAAK,IAAK,IAAK,KAAM,IAAK,IAAK,IAAK,KAC1E,OAAOH,EAAQI,WAAWrB,MAAM,IAAIC,KAAIC,IACtC,MAAMoB,EAAIV,OAAOV,GACjB,OAAU,IAANoB,EAAgBF,EAAoBE,QACpB,IAATJ,GACJC,EADiC,IACjB,GAAG,GAE9B,yCAesCI,EAAiBL,EAAUC,GAC/D,MAAMK,EAAsB,CAAC,GAAI,IAAK,IAAK,IAAK,IAAK,KAAM,IAAK,IAAK,IAAK,KAC1E,OAAOD,EAAQF,WAAWrB,MAAM,IAAIC,KAAIC,IACtC,MAAMoB,EAAIV,OAAOV,GACjB,OAAU,IAANoB,EAAgBE,EAAoBF,QACpB,IAATJ,EAA6B,IACjCC,EAAU,IAAM,GAAG,GAE9B,+BAQqCF,IACnC,MAAMG,EAAsB,CAAC,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KACzE,OAAOH,EAAQI,WAAWrB,MAAM,IAAIC,KAAIC,GAAKkB,GAAqBlB,IAAG,+BAQlCqB,IACnC,MAAMC,EAAsB,CAAC,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KACzE,OAAOD,EAAQF,WAAWrB,MAAM,IAAIC,KAAIC,GAAKsB,GAAqBtB,IAAG"}